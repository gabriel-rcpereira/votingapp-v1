#!/bin/bash

# Build the Maven project to create the JAR file
echo "Building Maven project..."
./mvnw clean package -DskipTests

# Check if the Maven build was successful
if [ $? -ne 0 ]; then
  echo "Maven build failed. Exiting..."
  exit 1
fi

# Build the Docker image using the Dockerfile
echo "Building Docker image..."
docker build -t vote-app .

# Check if the Docker build was successful
if [ $? -ne 0 ]; then
  echo "Docker build failed. Exiting..."
  exit 1
fi

# Print success message
echo "Docker image built successfully."
